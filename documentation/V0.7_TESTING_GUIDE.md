# v0.7 Testing Guide - Real-time Features & Offline Support

## ğŸ§ª **Testing Overview**

This guide provides comprehensive testing procedures for Todo App v0.7, covering:
- Real-time WebSocket functionality
- Notification system (in-app + email)
- Offline support and data synchronization
- Cross-tab synchronization
- Error handling and recovery

## ğŸ“‹ **Pre-Testing Setup**

### 1. Environment Setup
```bash
# Backend setup
cd backend
npm install
npm run migrate  # Run database migrations

# Frontend setup
cd frontend
npm install

# Environment variables
cp backend/.env.example backend/.env
cp frontend/env.example frontend/.env
```

### 2. Required Environment Variables
```env
# Backend (.env)
JWT_SECRET=your_jwt_secret
DB_HOST=localhost
DB_PORT=5432
DB_NAME=todo_app
DB_USER=your_db_user
DB_PASSWORD=your_db_password
EMAIL_USER=your_email@gmail.com
EMAIL_PASS=your_app_password
EMAIL_FROM=noreply@todoapp.com
REDIS_URL=redis://localhost:6379

# Frontend (.env)
REACT_APP_API_URL=http://localhost:5002/api
REACT_APP_WEBSOCKET_URL=ws://localhost:5002
REACT_APP_WEBSOCKET_RECONNECT_ATTEMPTS=5
REACT_APP_WEBSOCKET_RECONNECT_DELAY=2000
```

## ğŸš€ **Testing Procedures**

### **Phase 1: Basic Functionality Testing**

#### 1.1 Server Startup
```bash
# Terminal 1: Start backend
cd backend
npm start

# Terminal 2: Start frontend
cd frontend
npm start
```

**Expected Results:**
- âœ… Backend starts on port 5002
- âœ… Frontend starts on port 3000
- âœ… WebSocket service initializes
- âœ… Database connection established
- âœ… Email service initializes (or shows test mode)

#### 1.2 User Authentication
1. Navigate to `http://localhost:3000`
2. Register a new user or login with existing credentials
3. Verify successful authentication

**Expected Results:**
- âœ… Login/register works
- âœ… JWT token stored
- âœ… Redirected to dashboard
- âœ… User data loaded

### **Phase 2: Real-time WebSocket Testing**

#### 2.1 Connection Status
1. Open browser developer tools (F12)
2. Check console for WebSocket connection messages
3. Look for "WebSocket connected" message

**Expected Results:**
- âœ… Connection status shows "Connected" in header
- âœ… Console shows successful WebSocket connection
- âœ… No connection errors

#### 2.2 Cross-tab Synchronization
1. Open the app in two browser tabs
2. Create a todo in Tab 1
3. Watch Tab 2 for real-time updates

**Expected Results:**
- âœ… Todo appears instantly in Tab 2
- âœ… No page refresh required
- âœ… Real-time update notification

#### 2.3 Todo Operations Testing
Test each operation in multiple tabs:

**Create Todo:**
1. Create a todo in Tab 1
2. Verify it appears in Tab 2 immediately

**Update Todo:**
1. Edit a todo in Tab 1
2. Verify changes appear in Tab 2

**Delete Todo:**
1. Delete a todo in Tab 1
2. Verify it disappears from Tab 2

**Move Todo (Kanban):**
1. Drag todo to different column in Tab 1
2. Verify position updates in Tab 2

**Expected Results:**
- âœ… All operations sync instantly across tabs
- âœ… No data conflicts
- âœ… UI updates smoothly

### **Phase 3: Notification System Testing**

#### 3.1 In-app Notifications
1. Create a high-priority todo
2. Check for notification in the app
3. Verify notification appears in real-time

**Expected Results:**
- âœ… High-priority todo creates notification
- âœ… Notification appears instantly
- âœ… Notification has correct content

#### 3.2 Email Notifications
1. Configure email settings in backend
2. Create a high-priority todo
3. Check email inbox

**Expected Results:**
- âœ… Email sent successfully
- âœ… Email has proper HTML formatting
- âœ… Email contains correct todo information

#### 3.3 Notification Preferences
1. Go to Profile â†’ Notification Settings
2. Toggle different notification types
3. Test each notification type

**Expected Results:**
- âœ… Preferences save correctly
- âœ… Notifications respect user preferences
- âœ… Changes apply immediately

### **Phase 4: Offline Support Testing**

#### 4.1 Offline Detection
1. Open browser developer tools
2. Go to Network tab
3. Check "Offline" checkbox
4. Observe app behavior

**Expected Results:**
- âœ… Offline indicator appears
- âœ… App shows "Offline Mode" message
- âœ… Cached data still accessible

#### 4.2 Offline Data Access
1. Go offline
2. Try to view todos
3. Verify cached data loads

**Expected Results:**
- âœ… Cached todos display
- âœ… "Loaded cached data" message
- âœ… Read-only mode works

#### 4.3 Offline Action Queuing
1. Go offline
2. Create a new todo
3. Verify it's queued for sync

**Expected Results:**
- âœ… Todo appears in UI (optimistic update)
- âœ… "Queued for sync" message
- âœ… Queued actions counter increases

#### 4.4 Reconnection and Sync
1. Go back online
2. Watch for automatic sync
3. Verify queued actions process

**Expected Results:**
- âœ… "Back Online" indicator
- âœ… Automatic sync starts
- âœ… Queued actions process successfully
- âœ… "Synced X actions" message

### **Phase 5: Error Handling Testing**

#### 5.1 Network Interruption
1. Disconnect internet during operation
2. Try to create/update todo
3. Reconnect and verify sync

**Expected Results:**
- âœ… Graceful error handling
- âœ… Actions queued for retry
- âœ… Automatic sync on reconnection

#### 5.2 Server Restart
1. Restart backend server
2. Verify frontend reconnects
3. Test operations work normally

**Expected Results:**
- âœ… WebSocket reconnects automatically
- âœ… No data loss
- âœ… Operations resume normally

#### 5.3 Database Connection Loss
1. Stop database service
2. Try operations
3. Restart database

**Expected Results:**
- âœ… Graceful error messages
- âœ… Operations queue for retry
- âœ… Recovery when database returns

## ğŸ”§ **Automated Testing Scripts**

### Backend API Testing
```bash
# Run backend tests
cd backend
npm test

# Run specific test suites
npm test -- --grep "WebSocket"
npm test -- --grep "Notifications"
npm test -- --grep "Offline"
```

### Frontend Testing
```bash
# Run frontend tests
cd frontend
npm test

# Run specific test suites
npm test -- --grep "WebSocket"
npm test -- --grep "Offline"
npm test -- --grep "Notifications"
```

## ğŸ“Š **Performance Testing**

### Load Testing
```bash
# Install artillery for load testing
npm install -g artillery

# Run load test
artillery run tests/performance/websocket-load-test.yml
```

### Memory Testing
1. Open browser developer tools
2. Go to Memory tab
3. Take heap snapshots during operations
4. Monitor for memory leaks

**Expected Results:**
- âœ… No significant memory leaks
- âœ… Memory usage stable over time
- âœ… Garbage collection working properly

## ğŸ› **Common Issues & Solutions**

### Issue: WebSocket Connection Failed
**Symptoms:** Connection status shows "Failed"
**Solutions:**
1. Check if backend is running on port 5002
2. Verify WebSocket URL in frontend .env
3. Check firewall settings
4. Ensure Redis is running (if using Redis adapter)

### Issue: Email Notifications Not Sending
**Symptoms:** No emails received
**Solutions:**
1. Check email credentials in backend .env
2. Verify Gmail app password (not regular password)
3. Check spam folder
4. Test with different email provider

### Issue: Offline Mode Not Working
**Symptoms:** App crashes when offline
**Solutions:**
1. Check browser localStorage support
2. Verify offline storage service initialization
3. Check for JavaScript errors in console
4. Ensure proper error handling in components

### Issue: Cross-tab Sync Not Working
**Symptoms:** Changes don't appear in other tabs
**Solutions:**
1. Check WebSocket connection in both tabs
2. Verify same user logged in both tabs
3. Check for JavaScript errors
4. Ensure proper event handling

## ğŸ“ˆ **Success Criteria**

### Functional Requirements
- âœ… Real-time updates work across all tabs
- âœ… Notifications deliver successfully
- âœ… Offline mode provides full functionality
- âœ… Data syncs correctly when reconnected
- âœ… Error handling works gracefully

### Performance Requirements
- âœ… WebSocket latency < 50ms
- âœ… Notification delivery < 5 seconds
- âœ… Offline data loads < 1 second
- âœ… Sync operations complete < 10 seconds
- âœ… Memory usage stable over time

### User Experience Requirements
- âœ… Clear status indicators
- âœ… Helpful error messages
- âœ… Smooth animations and transitions
- âœ… Intuitive offline mode
- âœ… Responsive design works

## ğŸ¯ **Testing Checklist**

### Pre-Release Checklist
- [ ] All automated tests pass
- [ ] Manual testing completed
- [ ] Performance benchmarks met
- [ ] Error scenarios handled
- [ ] Cross-browser compatibility verified
- [ ] Mobile responsiveness tested
- [ ] Security vulnerabilities checked
- [ ] Documentation updated

### Post-Release Monitoring
- [ ] Monitor WebSocket connection rates
- [ ] Track notification delivery success
- [ ] Monitor offline usage patterns
- [ ] Check error logs regularly
- [ ] Monitor performance metrics
- [ ] Collect user feedback

## ğŸš€ **Ready for Production!**

Once all tests pass and success criteria are met, v0.7 is ready for production deployment with:
- Real-time synchronization
- Professional notifications
- Robust offline support
- Excellent user experience

Happy testing! ğŸ‰



